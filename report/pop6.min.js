function pop6_init_01(){"undefined"!=typeof a10x_dl?(a10x_dl.client_user_agent_full=window.clientInformation.userAgent,a10x_dl.client_user_agent=window.clientInformation.userAgent.replace(/[^A-Za-z]/g,""),a10x_dl.client_ip_address=p6_get_cookie("gtm_p6_ip"),void 0===a10x_dl.client_ip_address?(window.XMLHttpRequest?xmlHttp=new XMLHttpRequest:xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlHttp.onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data=JSON.parse(xmlHttp.response);a10x_dl.client_ip_address=data.IPv4,p6_set_cookie("gtm_p6_ip",data.IPv4,864e5),pop6_init_02()}},xmlHttp.open("POST","https://geolocation-db.com/json/",!0),xmlHttp.send()):pop6_init_02()):console.log(red_dot+pop6+" Error: 101")}function pop6_init_02(){if("undefined"!=typeof a10x_dl)if(a10x_dl.s_id=p6_get_cookie("gtm_p6_s_id"),void 0===a10x_dl.s_id){var xmlHttp;(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data;process_session(JSON.parse(xmlHttp.response),"02")}};let argString=new URLSearchParams(Object.entries(a10x_dl)).toString();xmlHttp.open("POST",ping_base+"pop6_init_02_02.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}else{var xmlHttp;(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data;process_session(JSON.parse(xmlHttp.response),"01")}};let argString=new URLSearchParams(Object.entries(a10x_dl)).toString();xmlHttp.open("POST",ping_base+"pop6_init_02_01.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}else console.log(red_dot+pop6+" Error: 102")}function pop6_init_03(){if("undefined"!=typeof a10x_dl){a10x_dl.fbc_last=a10x_dl.fbc;var fbc_clean="";if(void 0!==a10x_dl.fbc&&a10x_dl.fbc){var fbc_chunks=(fbc_clean=(fbc_clean=a10x_dl.fbc.split("_aem_"))[0]).split("."),fbc_time=parseInt(fbc_chunks[2]);Date.now()-fbc_time>6048e5&&(a10x_dl.fbc="")}if("undefined"!=typeof window&&void 0!==window.location&&void 0!==window.location.search){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);var fb_c_p=p6_get_cookie("_fbc"),fb_c_c=p6_get_cookie("gtm_p6_fb_c_c");if(void 0!==urlParams.get("fbclid")&&urlParams.get("fbclid")){var fbc_val=`fb.1.${Date.now()}.${urlParams.get("fbclid")}`;fbc_clean=fbc_val.split("_aem_"),p6_set_cookie("gtm_p6_fb_c_c",fbc_val=fbc_clean[0],{secure:!0,expires:80352e5}),a10x_dl.fbc=fbc_val}else void 0!==fb_c_c&&fb_c_c?a10x_dl.fbc=fb_c_c:void 0!==fb_c_p&&fb_c_p&&(fbc_clean=fb_c_p.split("_aem_"),p6_set_cookie("gtm_p6_fb_c_p",fb_c_p=fbc_clean[0],{secure:!0,expires:80352e5}),a10x_dl.fbc=fb_c_p);a10x_dl.fbc!=a10x_dl.fbc_last&&session_sync(a10x_dl.s_id,"fbc",a10x_dl.fbc)}}else console.log(red_dot+pop6+" Error: 103");pop6_init_04()}function pop6_init_04(){if("undefined"!=typeof a10x_dl){if(a10x_dl.fbp_last=a10x_dl.fbp,void 0!==a10x_dl.fbp&&a10x_dl.fbp){var fbp_chunks=a10x_dl.fbp.split("."),fbp_time=parseInt(fbp_chunks[2]);Date.now()-fbp_time>26784e5&&(a10x_dl.fbp="")}var fb_p_p=p6_get_cookie("_fbp");void 0!==fb_p_p&&fb_p_p&&(a10x_dl.fbp=fb_p_p),a10x_dl.fbp!=a10x_dl.fbp_last&&session_sync(a10x_dl.s_id,"fbp",a10x_dl.fbp)}else console.log(red_dot+pop6+" Error: 103b");pop6_init_05()}function pop6_init_05(reinit=!1){if("undefined"!=typeof a10x_dl){var xmlHttp;get_metadata(a10x_dl.metadata_mode),(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data=JSON.parse(xmlHttp.response);void 0!==data.events&&data.events&&data.events.forEach((the_data,index)=>{if(void 0!==the_data.currency)var currency=the_data.currency;else var currency="USD";if("click"==the_data.event_trigger)if(the_data.selector_query.includes("=")){let multi_tag_data;document.querySelectorAll(the_data.selector_query).forEach(tag=>{tag.addEventListener("click",()=>{parseInt(a10x_dl.event_value)<1&&parseInt(a10x_dl.content_value)>1&&(a10x_dl.event_value=a10x_dl.content_value),void 0!==a10x_dl.event_value&&parseInt(a10x_dl.event_value)>0&&0==parseInt(the_data.event_value)?custom_get_value(the_data.event_type,a10x_dl.event_value,tag):custom_get_value(the_data.event_type,the_data.event_value,tag)})})}else document.querySelector(the_data.selector_query)&&document.querySelector(the_data.selector_query).addEventListener("click",(function(){parseInt(a10x_dl.event_value)<1&&parseInt(a10x_dl.content_value)>1&&(a10x_dl.event_value=a10x_dl.content_value),void 0!==a10x_dl.event_value&&parseInt(a10x_dl.event_value)>0&&0==parseInt(the_data.event_value)?ping_capi(the_data.event_type,a10x_dl.event_value):ping_capi(the_data.event_type,the_data.event_value)}));if("url"==the_data.event_trigger){var page=window.location.pathname;if(page.includes(the_data.selector_query))ping_capi(the_data.event_type,the_data.event_value);else if(the_data.selector_query.includes("**")){let cleanedSelectorQuery=the_data.selector_query.replace("**","");page.endsWith(cleanedSelectorQuery)&&ping_capi(the_data.event_type,the_data.event_value)}}}),1==reinit?setTimeout(()=>{void 0!==data.form_fields&&data.form_fields&&(form_fields=data.form_fields,form_fields2=data.form_fields,data.form_fields.forEach((the_data,index)=>{"#"!=the_data.field_selector[0]&&"."!=the_data.field_selector[0]&&!the_data.field_selector.includes("=")&&document.querySelector(`input[name='${the_data.field_selector}']`)?document.querySelector(`input[name='${the_data.field_selector}']`).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if("#"!=the_data2.field_selector[0]&&"."!=the_data2.field_selector[0]&&!the_data2.field_selector.includes("=")&&void 0!==document.querySelector(`input[name='${the_data2.field_selector}']`)&&document.querySelector(`input[name='${the_data2.field_selector}']`)&&void 0!==document.querySelector(`input[name='${the_data2.field_selector}']`).value&&document.querySelector(`input[name='${the_data2.field_selector}']`).value){var v=document.querySelector(`input[name='${the_data2.field_selector}']`).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})})):"#"!=the_data.field_selector[0]&&"."!=the_data.field_selector[0]&&the_data.field_selector.includes("=")?document.querySelector(the_data.field_selector)&&void 0!==document.querySelector(the_data.field_selector)&&document.querySelector(the_data.field_selector).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if(void 0!==document.querySelector(the_data2.field_selector)&&document.querySelector(the_data2.field_selector)&&void 0!==document.querySelector(the_data2.field_selector).value&&document.querySelector(the_data2.field_selector).value){var v=document.querySelector(the_data2.field_selector).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})})):document.querySelector(the_data.field_selector)&&void 0!==document.querySelector(the_data.field_selector)&&!the_data.field_selector.includes("=")&&document.querySelector(the_data.field_selector).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if(void 0!==document.querySelector(the_data2.field_selector)&&document.querySelector(the_data2.field_selector)&&void 0!==document.querySelector(the_data2.field_selector).value&&document.querySelector(the_data2.field_selector).value){var v=document.querySelector(the_data2.field_selector).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})}))}))},1e3):void 0!==data.form_fields&&data.form_fields&&(form_fields=data.form_fields,form_fields2=data.form_fields,data.form_fields.forEach((the_data,index)=>{"#"!=the_data.field_selector[0]&&"."!=the_data.field_selector[0]&&!the_data.field_selector.includes("=")&&document.querySelector(`input[name='${the_data.field_selector}']`)?document.querySelector(`input[name='${the_data.field_selector}']`).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if("#"!=the_data2.field_selector[0]&&"."!=the_data2.field_selector[0]&&!the_data2.field_selector.includes("=")&&void 0!==document.querySelector(`input[name='${the_data2.field_selector}']`)&&document.querySelector(`input[name='${the_data2.field_selector}']`)&&void 0!==document.querySelector(`input[name='${the_data2.field_selector}']`).value&&document.querySelector(`input[name='${the_data2.field_selector}']`).value){var v=document.querySelector(`input[name='${the_data2.field_selector}']`).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})})):"#"!=the_data.field_selector[0]&&"."!=the_data.field_selector[0]&&the_data.field_selector.includes("=")?document.querySelector(the_data.field_selector)&&void 0!==document.querySelector(the_data.field_selector)&&document.querySelector(the_data.field_selector).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if(void 0!==document.querySelector(the_data2.field_selector)&&document.querySelector(the_data2.field_selector)&&void 0!==document.querySelector(the_data2.field_selector).value&&document.querySelector(the_data2.field_selector).value){var v=document.querySelector(the_data2.field_selector).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})})):document.querySelector(the_data.field_selector)&&void 0!==document.querySelector(the_data.field_selector)&&!the_data.field_selector.includes("=")&&document.querySelector(the_data.field_selector).addEventListener("focusout",(function(){form_fields2.forEach((the_data2,index2)=>{if(void 0!==document.querySelector(the_data2.field_selector)&&document.querySelector(the_data2.field_selector)&&void 0!==document.querySelector(the_data2.field_selector).value&&document.querySelector(the_data2.field_selector).value){var v=document.querySelector(the_data2.field_selector).value;if(void 0!==v&&""!=v){var sha256_v=sha256(v);a10x_dl[the_data2.field_type]!=sha256_v&&(a10x_dl[the_data2.field_type]=sha256_v,session_sync(a10x_dl.s_id,the_data2.field_type,sha256_v))}}})}))}))}};var args={};args.t1=a10x_dl.t1;let argString=new URLSearchParams(Object.entries(args)).toString();xmlHttp.open("POST",ping_base+"pop6_init_05.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}else console.log(red_dot+pop6+" Error: 104");reinit||pop6_init_06()}var run_loop=!0;function pop6_init_06(){"undefined"!=typeof a10x_dl?"undefined"!=typeof meta&&meta&&(sync_cart(),window.addEventListener("mousedown",()=>{run_loop&&sync_cart()}),window.addEventListener("touchstart",()=>{run_loop&&sync_cart()})):console.log(red_dot+pop6+" Error: 106"),ping_capi("PageView","0.00")}function process_event(event_type,event_value="",currency=""){}var last_url=window.location.href,datalayer_arg_num="",custom_event_fire=!1;function get_metadata(mode="meta"){if(mode.includes("headless")&&(window.addEventListener("mousedown",(function(){var url=window.location.href;url!=last_url&&(last_url=url,pop6_init_05())})),window.addEventListener("touchstart",(function(){var url=window.location.href;url!=last_url&&(last_url=url,pop6_init_05())}))),mode.includes("bestfriends")&&"undefined"!=typeof google_tag_manager&&void 0!==google_tag_manager["GTM-PQNJ8LJ"]&&google_tag_manager["GTM-PQNJ8LJ"]&&void 0!==google_tag_manager["GTM-PQNJ8LJ"].dataLayer&&google_tag_manager["GTM-PQNJ8LJ"].dataLayer){var bestfriends_event_id=google_tag_manager["GTM-PQNJ8LJ"].dataLayer.get("orderID");void 0!==bestfriends_event_id&&bestfriends_event_id?a10x_dl.event_id=bestfriends_event_id:void 0!==(bestfriends_event_id=google_tag_manager["GTM-PQNJ8LJ"].dataLayer.get("external_id"))&&bestfriends_event_id&&(a10x_dl.event_id=bestfriends_event_id)}if(mode.includes("gtm")&&"undefined"!=typeof dataLayer&&dataLayer.push({event:"pop6-base-code-loaded"}),mode.includes("olsen")){if(void 0!==document.getElementById("subtotal")&&document.getElementById("subtotal")&&"null"!=document.getElementById("subtotal")){var the_price=document.getElementById("subtotal").innerText.replace(/[^0-9.\,]/g,"");a10x_dl.event_value=parseFloat(the_price).toFixed(2),a10x_dl.content_value=a10x_dl.event_value}if(document.querySelectorAll(".woocommerce-Price-amount").length>0&&void 0!==document.querySelectorAll(".woocommerce-Price-amount")[0]&&document.querySelectorAll(".woocommerce-Price-amount")[0]&&"null"!=document.querySelectorAll(".woocommerce-Price-amount")[0]){var the_price=document.querySelectorAll(".woocommerce-Price-amount")[document.querySelectorAll(".woocommerce-Price-amount").length-1].innerText.replace(/[^0-9.\,]/g,"");a10x_dl.event_value=parseFloat(the_price).toFixed(2),a10x_dl.content_value=a10x_dl.event_value,payload("InitiateCheckout",a10x_dl)}}if("meta"==mode){if("undefined"!=typeof Shopify&&void 0!==Shopify.currency&&void 0!==Shopify.currency.active&&(a10x_dl.currency=Shopify.currency.active),"undefined"!=typeof meta&&meta&&void 0!==meta.product&&meta.product){if(void 0!==meta.product.id&&meta.product.id&&(a10x_dl.content_ids=[],a10x_dl.content_ids.push(meta.product.id)),void 0!==meta.product.variants&&meta.product.variants){var i=0;if(meta.product.variants.length>1){if(void 0!==document.querySelector('select[name="id"]')&&document.querySelector('select[name="id"]')&&void 0!==document.querySelector('select[name="id"]').value&&document.querySelector('select[name="id"]').value){var selected_id=document.querySelector('select[name="id"]').value;meta.product.variants.forEach((the_data,index)=>{the_data.id==selected_id&&(i=index)})}if(void 0!==document.querySelector('input[name="id"]')&&document.querySelector('input[name="id"]')&&void 0!==document.querySelector('input[name="id"]').value&&document.querySelector('input[name="id"]').value){var selected_id=document.querySelector('input[name="id"]').value;meta.product.variants.forEach((the_data,index)=>{the_data.id==selected_id&&(i=index)})}}"undefined"!=meta.product.variants[i].name&&meta.product.variants[i].name&&(a10x_dl.content_name=meta.product.variants[i].name),"undefined"!=meta.product.variants[i].price&&meta.product.variants[i].price&&(a10x_dl.event_value=meta.product.variants[i].price/100,a10x_dl.event_value=(Math.round(100*a10x_dl.event_value)/100).toFixed(2),a10x_dl.content_value=a10x_dl.event_value)}payload("ViewContent",a10x_dl)}}else if(mode.includes("woocommerce")){if(void 0!==document.getElementsByClassName("woocommerce")[0]){if(void 0!==document.getElementsByClassName("woocommerce-Price-currencySymbol")[0]){var woo_currency_symbol=document.getElementsByClassName("woocommerce-Price-currencySymbol")[0].innerText;"£"==woo_currency_symbol||"GBP"==woo_currency_symbol||"&pound;"==woo_currency_symbol||"U+000A3"==woo_currency_symbol||"&#xa3;"==woo_currency_symbol||"&#163;"==woo_currency_symbol?a10x_dl.currency="GBP":"$"==woo_currency_symbol||"USD"==woo_currency_symbol||"&dollar;"==woo_currency_symbol||"U+00024"==woo_currency_symbol||"&#x24;"==woo_currency_symbol||"&#36;"==woo_currency_symbol?a10x_dl.currency="USD":"CAD$"==woo_currency_symbol||"CAN$"==woo_currency_symbol||"Can$"==woo_currency_symbol||"C$"==woo_currency_symbol||"CAD"==woo_currency_symbol?a10x_dl.currency="CAD":"NZ$"==woo_currency_symbol||"NZD"==woo_currency_symbol?a10x_dl.currency="NZD":"kr"==woo_currency_symbol||"SEK"==woo_currency_symbol?a10x_dl.currency="SEK":"Kr."==woo_currency_symbol||"DKK"==woo_currency_symbol?a10x_dl.currency="DKK":"₩"==woo_currency_symbol||"KRW"==woo_currency_symbol?a10x_dl.currency="KRW":"ج.س."==woo_currency_symbol||"SDG"==woo_currency_symbol?a10x_dl.currency="SDG":"MAD"==woo_currency_symbol||"DH"==woo_currency_symbol?a10x_dl.currency="MAD":"zł"==woo_currency_symbol||"PLN"==woo_currency_symbol?a10x_dl.currency="PLN":"CHF"==woo_currency_symbol||"CHf"==woo_currency_symbol||"Fr."==woo_currency_symbol||"SFr."==woo_currency_symbol?a10x_dl.currency="CHF":"د.إ"==woo_currency_symbol||"AED$"==woo_currency_symbol||"AED"==woo_currency_symbol||"ar"==woo_currency_symbol?a10x_dl.currency="AED":"A$"==woo_currency_symbol||"AUS$"==woo_currency_symbol||"AUS"==woo_currency_symbol||"AU$"==woo_currency_symbol?a10x_dl.currency="AUS":"€"==woo_currency_symbol||"EUR"==woo_currency_symbol||"&euro;"==woo_currency_symbol||"U+020AC"==woo_currency_symbol||"&#x20AC;"==woo_currency_symbol||"&#8364;"==woo_currency_symbol?a10x_dl.currency="EUR":"¥"==woo_currency_symbol||"YEN"==woo_currency_symbol||"&yen;"==woo_currency_symbol||"U+000A5"==woo_currency_symbol||"&#xa5;"==woo_currency_symbol||"&#165;"==woo_currency_symbol||"JPY"==woo_currency_symbol?a10x_dl.currency="JPY":"₱"==woo_currency_symbol||"MXN"==woo_currency_symbol||"U+020B1"==woo_currency_symbol||"&#x20B1;"==woo_currency_symbol||"&#8369;"==woo_currency_symbol?a10x_dl.currency="MXN":"元"==woo_currency_symbol||"HK$"==woo_currency_symbol||"HKD"==woo_currency_symbol?a10x_dl.currency="HKD":"₹"!=woo_currency_symbol&&"INR"!=woo_currency_symbol&&"U+020B9"!=woo_currency_symbol&&"&#x20B9;"!=woo_currency_symbol&&"&#8377;"!=woo_currency_symbol||(a10x_dl.currency="INR")}var the_total_parent,the_total;if(void 0!==document.querySelectorAll(".order-total")[0])void 0!==(the_total=(the_total_parent=document.getElementsByClassName("order-total")[0]).querySelectorAll(".woocommerce-Price-amount")[0].innerText.replace(/[^0-9.]/g,""))&&(a10x_dl.event_value=the_total,a10x_dl.content_value=a10x_dl.event_value,p6_set_cookie("gtm_p6_cart_total",the_total,6048e5));else if(void 0!==document.querySelectorAll(".woocommerce-Price-amount")[0]){var the_price;void 0!==(the_price=document.querySelectorAll(".woocommerce-Price-amount")[0].innerText.replace(/[^0-9.]/g,""))&&(a10x_dl.event_value=the_price,a10x_dl.content_value=a10x_dl.event_value,payload("ViewContent",a10x_dl))}}}else if(mode.includes("fgx")){var fgx_cart_total;if("undefined"!=typeof google_tag_manager)if(void 0!==google_tag_manager["GTM-PN6839"]&&google_tag_manager["GTM-PN6839"]){if(void 0!==google_tag_manager["GTM-PN6839"].dataLayer&&google_tag_manager["GTM-PN6839"].dataLayer)void 0!==(fgx_cart_total=google_tag_manager["GTM-PN6839"].dataLayer.get("frgxOrderTotal"))&&fgx_cart_total&&p6_set_cookie("gtm_p6_cart_total",fgx_cart_total,6048e5)}else if(void 0!==google_tag_manager["GTM-N4M8HQ"]&&google_tag_manager["GTM-N4M8HQ"]){var fgx_cart_total;if(void 0!==google_tag_manager["GTM-N4M8HQ"].dataLayer&&google_tag_manager["GTM-N4M8HQ"].dataLayer)void 0!==(fgx_cart_total=google_tag_manager["GTM-N4M8HQ"].dataLayer.get("pcomOrderTotal"))&&fgx_cart_total&&p6_set_cookie("gtm_p6_cart_total",fgx_cart_total,6048e5)}}else if("camp"==mode)"undefined"!=typeof dataLayer&&dataLayer.forEach((function(the_val,the_key){"object"==typeof the_val&&"ecommerce"in the_val&&void 0!==the_val.ecommerce&&the_val.ecommerce&&void 0!==the_val.ecommerce.detail&&void 0!==the_val.ecommerce.detail.products&&void 0!==the_val.ecommerce.detail.products[0]&&1==the_val.ecommerce.detail.products.length&&(void 0!==the_val.ecommerce.detail.products[0].name&&(a10x_dl.content_name=the_val.ecommerce.detail.products[0].name),void 0!==the_val.ecommerce.detail.products[0].product_id&&(a10x_dl.content_ids=[],a10x_dl.content_ids.push(the_val.ecommerce.detail.products[0].product_id)),void 0!==the_val.ecommerce.detail.products[0].price&&(a10x_dl.content_value=the_val.ecommerce.detail.products[0].price,a10x_dl.event_value=the_val.ecommerce.detail.products[0].price),payload("ViewContent",a10x_dl))}));else if("pela"==mode)"undefined"!=typeof dataLayer&&dataLayer.forEach((function(the_val,the_key){"object"==typeof the_val&&"ecommerce"in the_val&&void 0!==the_val.ecommerce&&the_val.ecommerce&&void 0!==the_val.ecommerce.detail&&"productDetailView"==the_val.event&&void 0!==the_val.ecommerce.detail.products&&void 0!==the_val.ecommerce.detail.products[0]&&1==the_val.ecommerce.detail.products.length&&(void 0!==the_val.ecommerce.detail.products[0].name&&(a10x_dl.content_name=the_val.ecommerce.detail.products[0].name),void 0!==the_val.ecommerce.detail.products[0].product_id&&(a10x_dl.content_ids=[],a10x_dl.content_ids.push(the_val.ecommerce.detail.products[0].product_id)),void 0!==the_val.ecommerce.detail.products[0].price&&(a10x_dl.content_value=the_val.ecommerce.detail.products[0].price,a10x_dl.event_value=the_val.ecommerce.detail.products[0].price),payload("ViewContent",a10x_dl))}));else if(mode.includes("tourparavel")){if("undefined"!=typeof a10x_dl){if(1==run_loop){var cart_id=p6_get_cookie("cart");void 0!==cart_id&&cart_id&&(run_loop=!1,cart_id!=a10x_dl.sh_cart_id&&(session_sync(a10x_dl.s_id,"sh_cart_id",cart_id),a10x_dl.sh_cart_id=cart_id,p6_set_cookie("gtm_p6_sh_cart_id",cart_id,864e5)))}window.addEventListener("mousedown",()=>{if(run_loop){var cart_id=p6_get_cookie("cart");void 0!==cart_id&&cart_id&&(run_loop=!1,cart_id!=a10x_dl.sh_cart_id&&(session_sync(a10x_dl.s_id,"sh_cart_id",cart_id),a10x_dl.sh_cart_id=cart_id,p6_set_cookie("gtm_p6_sh_cart_id",cart_id,864e5)))}}),window.addEventListener("touchstart",()=>{if(run_loop){var cart_id=p6_get_cookie("cart");void 0!==cart_id&&cart_id&&(run_loop=!1,cart_id!=a10x_dl.sh_cart_id&&(session_sync(a10x_dl.s_id,"sh_cart_id",cart_id),a10x_dl.sh_cart_id=cart_id,p6_set_cookie("gtm_p6_sh_cart_id",cart_id,864e5)))}})}}else if("tru_mpg"==mode){if("undefined"!=typeof google_tag_manager&&void 0!==google_tag_manager["GTM-PS7SL57"]&&google_tag_manager["GTM-PS7SL57"]&&"AddToCart"==a10x_dl.event_type){tag.id=tag.id.replace("lnkAddToCart","lblPrice");let tag_replace_value=document.getElementById(tag.id).innerText;tag_replace_value=parseInt(tag_replace_value.replace("$","")),a10x_dl.event_value=tag_replace_value,event_value=tag_replace_value}}else if(mode.includes("melon")){var page=window.location.pathname;if(void 0!==document.getElementById("currency_switcher")[0].value&&(a10x_dl.currency=document.getElementById("currency_switcher")[0].value),void 0!==document.getElementsByClassName("woocommerce-Price-amount")[0]){var price_element=document.getElementsByClassName("woocommerce-Price-amount")[0];void 0!==price_element.dataset&&void 0!==price_element.dataset.price&&(a10x_dl.event_value=parseFloat(price_element.dataset.price).toFixed(2),a10x_dl.content_value=a10x_dl.event_value)}if("undefined"!=typeof dataLayer&&dataLayer.forEach((function(the_val,the_key){if("object"==typeof the_val)for(const the_key2 in the_val)void 0!==the_val[the_key2].ecomm_prodid&&("object"!=typeof a10x_dl.content_ids&&(a10x_dl.content_ids=[]),a10x_dl.content_ids.push(the_val[the_key2].ecomm_prodid)),void 0!==the_val[the_key2].page_title&&(a10x_dl.content_name=the_val[the_key2].page_title)})),void 0!==document.querySelectorAll(".order-total")[0]){var the_total_parent=document.getElementsByClassName("order-total")[0],last_element_index=document.getElementsByClassName("order-total").length-1,the_total;void 0!==(the_total=the_total_parent.querySelectorAll(".woocommerce-Price-amount")[last_element_index]).dataset&&void 0!==the_total.dataset.price&&(the_total=parseFloat(the_total.dataset.price).toFixed(2),a10x_dl.event_value=the_total),void 0!==the_total&&(p6_set_cookie("gtm_p6_cart_total",the_total,6048e5),page.includes("cart")?payload("AddToCart",a10x_dl):page.includes("checkout")&&payload("InitiateCheckout",a10x_dl))}else if(void 0!==document.querySelectorAll(".woocommerce-Price-amount")[0]){var the_price;void 0!==(the_price=document.querySelectorAll(".woocommerce-Price-amount")[0].innerText.replace(/[^0-9.]/g,""))&&payload("ViewContent",a10x_dl)}page.includes("order-received")&&(a10x_dl.event_value=p6_get_cookie("gtm_p6_cart_total"),payload("Purchase",a10x_dl))}else if(mode.includes("ruokaboksi"))a10x_dl.currency="EUR",void 0!==document.getElementsByClassName("woocommerce-Price-amount")[0]&&((the_price=(the_price=document.querySelectorAll(".woocommerce-Price-amount")[0].innerText.replace(/[^0-9.\,]/g,"")).split(",")).length>1&&(the_price=the_price[0]),a10x_dl.event_value=parseFloat(the_price).toFixed(2),a10x_dl.content_value=a10x_dl.event_value,p6_set_cookie("gtm_p6_cart_total",a10x_dl.event_value,6048e5)),void 0!==window.dataLayer&&window.dataLayer&&window.dataLayer.push({event:"pop6_loaded"});else if(mode.includes("color_camp")&&(0==custom_event_fire&&(window.addEventListener("click",(function(){color_camp_add_to_cart()})),custom_event_fire=!0),"undefined"!=typeof dataLayer))for(let i=dataLayer.length-1;i>=0;i--)if(void 0!==dataLayer[i][1]&&"view_item"==dataLayer[i][1]){void 0!==dataLayer[i][2]&&void 0!==dataLayer[i][2].items&&void 0!==dataLayer[i][2].items[0]&&(a10x_dl.content_name=dataLayer[i][2].items[0].name,a10x_dl.content_ids=[],a10x_dl.content_ids.push(dataLayer[i][2].items[0].id),a10x_dl.content_value=dataLayer[i][2].items[0].price,a10x_dl.event_value=dataLayer[i][2].items[0].price,payload("ViewContent",a10x_dl));break}}function color_camp_add_to_cart(){if("undefined"!=typeof dataLayer&&dataLayer.length>0&&void 0!==dataLayer[dataLayer.length-1][1]){var ii=dataLayer.length-1;"add_to_cart"==dataLayer[ii][1]&&ii!=datalayer_arg_num&&(a10x_dl.content_name=dataLayer[ii][2].items[0].name,a10x_dl.content_ids=[],a10x_dl.content_ids.push(dataLayer[ii][2].items[0].id),a10x_dl.content_value=dataLayer[ii][2].items[0].price,a10x_dl.event_value=dataLayer[ii][2].items[0].price,datalayer_arg_num=ii,payload("AddToCart",a10x_dl))}}function payload(event_type,datalayer){if(void 0!==datalayer){if(datalayer.event_type=event_type,"Purchase"==event_type||"Purchasetest"==event_type){var cart_total=p6_get_cookie("gtm_p6_cart_total");void 0!==cart_total&&parseInt(cart_total)>1&&(datalayer.event_value=cart_total)}var xmlHttp;(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data=JSON.parse(xmlHttp.response)}};let argString=new URLSearchParams(Object.entries(datalayer)).toString();xmlHttp.open("POST",ping_base+"pop6_ping_capi.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}}function ping_capi(event_type,event_value,currency="",custom_data=""){if("undefined"!=typeof a10x_dl){if(a10x_dl.event_type=event_type,a10x_dl.event_value=event_value,""!==currency&&(a10x_dl.currency=currency),""!==custom_data&&(a10x_dl.custom_data=custom_data),"Purchase"==event_type||"Purchasetest"==event_type){var cart_total=p6_get_cookie("gtm_p6_cart_total");void 0!==cart_total&&parseInt(cart_total)>1&&(a10x_dl.event_value=cart_total)}var xmlHttp;(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data=JSON.parse(xmlHttp.response)}};let argString=new URLSearchParams(Object.entries(a10x_dl)).toString();xmlHttp.open("POST",ping_base+"pop6_ping_capi.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}}function session_sync(the_session_id,the_key,the_value){var args={},xmlHttp;args.session_id=the_session_id,args.passed_key=the_key,args.passed_value=the_value,(xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data=JSON.parse(xmlHttp.response)}};let argString=new URLSearchParams(Object.entries(args)).toString();xmlHttp.open("POST",ping_base+"pop6_sync.php",!0),xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.send(argString)}function process_session(data,path){if(void 0!==data.session_id&&data.session_id&&(p6_set_cookie("gtm_p6_s_id",data.session_id,80352e5),a10x_dl.s_id=data.session_id),void 0!==data.session_source&&data.session_source){var s_source=data.session_source;if("new"==s_source)a10x_dl.fn=null,a10x_dl.ln=null,a10x_dl.em=null,a10x_dl.ph=null,a10x_dl.fbp=null,a10x_dl.fbc=null,a10x_dl.sh_cust_id=null,a10x_dl.sh_cart_id=null;else if("db"==s_source){var loop_keys;if(void 0!==data.session_data)["fn","ln","em","ph","fbp","fbc","sh_cust_id","sh_cart_id"].forEach((function(the_val,the_key){void 0!==data.session_data[the_val]&&data.session_data[the_val]?(a10x_dl[the_val]=data.session_data[the_val],"fbc"==the_val&&p6_set_cookie("gtm_p6_fb_c_s",data.session_data[the_val],80352e5)):a10x_dl[the_val]=null}))}else console.log('session source wasnt "new" or "db".');pop6_init_03()}else console.log("no session source passed.")}function sync_cart(){if("undefined"!=typeof a10x_dl){if(1==run_loop){var cart_id=p6_get_cookie("cart");void 0!==cart_id&&cart_id&&(run_loop=!1,cart_id!=a10x_dl.sh_cart_id&&(session_sync(a10x_dl.s_id,"sh_cart_id",cart_id),a10x_dl.sh_cart_id=cart_id,p6_set_cookie("gtm_p6_sh_cart_id",cart_id,864e5))),setTimeout(()=>{sync_cart()},1e3)}}else console.log(red_dot+pop6+" Error: 105")}function custom_get_value(event_type,event_value,tag){if("tru_mpg"==a10x_dl.metadata_mode&&"AddToCart"==event_type){tag.id=tag.id.replace("lnkAddToCart","lblPrice");let tag_replace_value=document.getElementById(tag.id).innerText;tag_replace_value=parseInt(tag_replace_value.replace("$","")),event_value=tag_replace_value}ping_capi(event_type,event_value)}function get_ip(){window.XMLHttpRequest?xmlHttp=new XMLHttpRequest:xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlHttp.onreadystatechange=function(){if(4==xmlHttp.readyState&&200==xmlHttp.status){let data;return JSON.parse(xmlHttp.response).IPv4}},xmlHttp.open("POST","https://geolocation-db.com/json/",!0),xmlHttp.send()}function p6_get_cookie(name){const value=`; ${document.cookie}`,parts=value.split(`; ${name}=`);if(2===parts.length)return parts.pop().split(";").shift()}function p6_set_cookie(name,value,milliseconds){var expires;if(milliseconds){var date=new Date;date.setTime(date.getTime()+milliseconds),expires="; expires="+date.toGMTString()}else expires="";document.cookie=name+"="+value+expires+"; path=/"}function objectMap(object,mapFn){return Object.keys(object).reduce((function(result,key){return result[key]=mapFn(object[key]),result}),{})}